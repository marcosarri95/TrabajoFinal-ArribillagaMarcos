# TRABAJO-FINAL-ARRIBILLAGAMARCOS
Entrega del proyecto final para curso JavaScript


# Proyecto final
El proyecto final será sobre la compra de pasajes de aviones, en el mismo se darán las distintas opciones al usuario, con el lugar de partida y lugar de destino.
Los distintos métodos de pago (efectivo, débito o crédito), y el costo final del mismo. También se darán detalles de la compra como el impuesto país y demas detalles
que se mostrarán a la hora de emitirse el "precio final" del producto adquirido.

# PreEntrega1
Esta preentrega constará de un simulador interactivo en el que el usuario podrá elegir entre 3 destinos con 3 precios diferentes, según la elección del usuario se mostrará un menú con los métodos de pago. En el caso de que el usuario ingrese una elección incorrecta, se volverá a mostrar las opciones hasta que elija una que sea correcta. Los menúes se muestran al usuario por medio de la herramienta Console.log() y la solicitud de datos se adquiere mediante prompts. A lo ultimo se colocó una opción para permitirle volver a comprar pasajes al usuario, en caso de que no quiera, pulsará 'N' en caso de que quiera comprar pasajes nuevamente pulsará 'S', en caso de que sea otra letra se volverá a solicitar este menú al usuario advirtiendo por console.log() que la opción ingresada fue incorrecta. Si el usuario accede a comprar pasajes nuevamente, el precio no se acumulará con los pasajes comprados anteriormente (en esta primera versión de la preentrega).

# PreEntrega2
Esta pre-entrega constará de el mismo simulador anteriormente presentado, con el agregado de que el usuario podrá agregar su nombre, apellido, fecha de nacimiento, nacionalidad y DNI. Luego de esto, se le solicitará la cantidad de pasajes a comprar y una lista de origenes y destinos posibles. En función del origen y destino elegido, será el precio del vuelo, el cual tendrá su valor en dolares, y se le aplicará el impuesto país del 30% y la percepción de ganancias del 35%. A su vez, tendrá la opción de pagar con tarjeta, el mismo tendrá un interés distinto según la cantidad de cuotas que se paguen, este interés se formará por numeros aleatorios en determinados rangos. Los objetos creados serán el objeto cliente, que tendrá la información personal correspondiente a cada persona, el objeto viaje que tendrá los origenes y destinos que se podrán solicitar así como su precio final según el tipo de pago, y por ultimo el objeto tarjeta, que tendrá los datos asociados a la tarjeta de crédito o débito correspondiente (no se podrá pagar en efectivo ya sea en $ o USD fisicos). 
La interacción con el usuario será mediante prompts y console.log, diciendole en todo momeento al usuario las opciones disponibles para avanzar en el menú.
Se comprobará que el origen y destino sean los ofrecidos para esto se empleo el metodo SOME para encontrar coincidencias, 3 clases, se crearon vectores de objetos, se empleó el método Math.random() y Math.round() y funciones. En esta preentrega no se realizó una comprobación de los datos ingresados por el usuario, es decir limites de caracteres en el nombre, que el dni sean solamente números, etc, ya que eso se realizará en la proxima pre entrega, con el agregado de que ya podrán insertar datos sobre los campos realizados en html y css. 

# PreEntrega3
En esta preentrega se agregó la interfaz diseñada con HTML y CSS donde el usuario ingresa los valores deseados y mediante botones validamos los mismos. Se añadieron funcionalidades de manejo con DOM, eventos de click a botones, y almacenamiento en storage para reutilizar los datos en multiples html. Finalizando con la muestra al usuario de los datos elegidos y cargados. Se adjuntan 9 archivos, 3 html y css distintos, y tres archivos javascript (java.js, java2.js y java3.js). Se aclara que al tener nulos conocimientos de html y css se realizó el mejor trabajo posible, teniendo las mayores dificultades en el armado de la página (ya que el módulo que estoy desarrollando es de back end), no así en el código Javascript.


# EntregaTrabajo final

Para el trabajo final se tuvieron en cuenta la base de las 3 preentregas anteriores y se continuo con la misma idea, se encontro una API GEOREF (del gobierno nacional), la cual nos entrega en formato JSON datos relevantes a provincias, localidades, municipios, etc, toda la documentacion de la misma se puede encontrar en https://apis.datos.gob.ar/georef/api/ . Simulando que todas las ciudades tienen un aeropuerto, el usuario puede elegir el origen y el destino de donde quiere viajar, por cuestiones de performance de la API, solamente se solicitan 5000 localidades, si se obtienen mayor cantidad de datos, la misma comienza a fallar con las entregas(por lo menos en mi caso). Comenzamos por la pagina INDEX.HTML, en la misma se realiza se presenta un formulario para poder seleccionar mediante el mouse, si desea comprar un viaje solamente de ida, o ida y vuelta. Luego de esto tenemos 2 campos para elegir el origen (de donde queremos salir) mediante un selector, a su izquierda existe un campo de input que se puede utilizar para filtrar la localidad a buscar. Lo mismo ocurre para la localidad destino. Si se elige solamente el viaje de ida, se bloquea el selector de la fecha de vuelta, y si se elije ida y vuelta el mismo se desbloquea, se tomo como parametro que la fecha de vuelta tiene que ser como minimo igual a la fecha de ida, no pudiendo tener una fecha de ida posterior a una fecha de vuelta. Tambien se indican mediante 2 selectores distintos, la cantidad de personas (pasajes) a comprar y la clase (turista, bussines o primera clase) en que se desea volar. En esta misma pagina se agrego una asincronia mediante un SETINTERVAL que cada 10 segundos alterne entre 3 combinaciones de "paquetes de viajes distintas". En caso de que el usuario no elija correctamente alguna de las opciones anteriormente dichas, mediante la libreria SweetAlert se le notificaran sus errores, debiendo corregirlos para poder avanzar a la siguiente pagina. Todos los datos almacenados se guardan en un objeto y luego en el localStorage (previamente convertidos en JSON) para poder utilizarlos posteriormente, tambien se asigno de forma aleatoria un valor de dolar oficial que nos servira en la proxima pantalla para poder calcular el valor total del viaje (tambien se almacena en el local storage).

Luego pasamos a la segunda pagina que es COMPRAPASAJES.HTML. En esta se le presentan 3 empresas de vuelo distintas. El precio final se calcula trayendo del local storage el valor del dolar oficial, multiplicandolo por el costo del viaje en dolares (calculado aleatoriamente), para luego aplicarle los impuestos, el precio final contempla la cantidad de pasajes solicitados en la primera pantalla. En este caso se tomo que el costo de volar con cualquier empresa sea el mismo, pero generando una diferencia en los tiempos de salida y de llegada de los vuelos, ya sea de salida y de llegada en el caso de que sea solo de ida, y de vuelta y llegada en el caso de ida y vuelta. Para los horarios de salida del aeropuerto se generaron valores aleatorios entre las 01 y las 11am, y para los horarios de vuelta entre las 12pm y las 00pm. Se le da la opcion de que mediante un boton el usuario elija la opcion deseada. Los datos del vuelo y de la empresa, son guardados en un objeto para posteriormente ser almacenado tambien en el local storage.

Pasamos a la tercera pantalla FORMULARIOPYT.html. En esta pantalla en funcion de la cantidad de personas que van a viajar (se obtiene el valor del objeto en el local storage), se genera de forma dinamica mediante Javascript los formularios para poder ingresar los datos de las personas, en el caso de ser 2 o mas personas, se almacenan en un array de objetos para luego almacenarse en el local storage. Todos los campos que sean de texto, se les aplica la funcion trim() y ToUpperCase() para quitarle los espacios y convertirlos en mayusculas, con excepcion del mail que siempre se lo convierte a minusculas, dicho esto se agrega un formulario para que el usuario ingrese su mail y su telefono de contacto. Luego de esto se le da la opcion de pago al usuario mediante un selector, para pagar en debito sin interes, o en cuotas con interes, si el usuario elije pagar en cuotas, se genera un interes de forma aleatoria y este se le aplica al precio final previamente fijado del viaje (Se lo obtiene de los objetos en el local storage), y se almacena en una variable para posteriormente ser insertada en el local storage. Tambien se le solicitan los campos para la tarjeta de credito/debito que tambien se cargan en un objeto de clase y se almacenan en el local storage. En caso de que el usuario no complete alguno de estos campos, mediante la libreria SWEETALERT se le notificara que campos quedaron vacios, debiendo completarlos para poder avanzar a la siguiente pantalla.

En la ultima pantalla FINALIZARCOMPRA.HTML se le muestra un resumen de la compra al usuario, trayendo los objetos y variables del local storage, como son el viaje, los datos del viaje, los datos de las personas y el preciofinal.

